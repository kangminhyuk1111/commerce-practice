# 4. QnA

## 요구사항 분석

### 기획서 요약
- Question 하나당 Answer하나가 달린다.
- 리스트로 5개 정도 있어 보인다.

### 기획서 기반 요구사항 정의
#### 테이블 구성 고민
Question하나당 Answer하나가 달리기 때문에 이미 답변이 존재한다면 또 못달도록 막아줘야한다.

QnA라는 테이블 하나를 두고 Question테이블과 Answer테이블을 둘것인지, QnA테이블에 Enum 상태로 테이블을 둘것인지 정해야한다.

내가 생각했을 때는 분리해주는게 맞다고 생각한다. Question 테이블이 아래에 Answer를 가지도록 한다.

비밀글 처리가 가능하도록 설정한다. 사용자가 질문을 남길 때 민감한 정보가 추가될 수 있기 때문이다.
#### API 구성 방식 고민
크게 두가지 방법이 고민되고 있는 상황이다.
1. Question과 Answer를 묶어서 5개를 페이징 하여 내려주는 방법
2. Question만 내려주고 Answer는 Question을 클릭했을 때 드롭다운으로 내리면서 API호출로 가져오는 법

고민했을 때, 1번을 선택했다.
- 사용자는 한눈에 들어오는 화면을 더 선호한다.
- 어짜피 페이징해서 5개만 내려준다면 부하는 적다.
- API Call = 비용이다. 전체 조회해도 부하가 심하지 않는 상황이라면 굳이 API 호출 횟수를 증가시킬 이유가 없다.
- Answer를 조회할 때 마다 데이터베이스 커넥션, 서버 부하가 일어나기 때문이다.

### Question 테이블 구성
- Id: 고유 식별자
- productId: QnA 대상 상품의 고유 식별자
- userId: 질문 작성자
- content: 질문 내용
- createdAt, updatedAt
- isSecret: 비밀글 설정

### Answer 테이블 구성
- Id: 고유 식별자
- QuestionId: 연결된 답변의 고유 식별자
- userId: 답변 작성자
- content: 답변 내용
- createdAt, updatedAt

### Question, Answer 정책 검증
- [] 두 테이블 모두 작성자 만이 삭제할 수 있다.
- [] 