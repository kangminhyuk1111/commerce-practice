# 8. 장바구니(Cart)

## 장바구니 기능 정의
- 사용자가 상품을 선택하여 장바구니에 담는다.
- 장바구니에는 상품이 담기고 담긴 상품의 유지 기간은 1개월이다.
- 1개월이 지난 상품은 장바구니에서 해제된다.
- 상품이미지, 상품명, 상품 가격, 상품 갯수가 장바구니 페이지에 표시된다.
- 장바구니에서 쿠폰 적용을 하지않고 주문 페이지에서 적용한다.
- 총합 상품의 갯수와 상품 전체를 더한 가격을 표시해준다.

## 비즈니스 규칙
- **[CART-BR-001]**: 사용자는 장바구니에 상품을 추가한다.
- **[CART-BR-002]**: 중복된 상품을 추가할 경우 상품의 갯수가 증가한다.
- **[CART-BR-003]**: 장바구니 페이지에는 상품이미지, 상품명, 상품가격, 상품갯수를 표시한다.
- **[CART-BR-004]**: 총 상품의 갯수와 총 상품의 가격을 표시한다.
- **[CART-BR-005]**: 장바구니 페이지에서 go to order(주문) 버튼 클릭시 주문 페이지로 이동한다.
- **[CART-BR-006]**: 장바구니 페이지에서는 쿠폰을 적용하지 않는다.
- **[CART-BR-007]**: 쿠폰 적용은 주문 페이지에서만 가능하다.
- **[CART-BR-008]**: 장바구니 페이지에서 주문으로 넘어갈 때, 장바구니의 내역을 모두 가지고 주문 페이지로 넘어간다.
- **[CART-BR-009]**: 장바구니에 담긴 상품의 보관 기간은 1개월이다. (추후 개선) 
- **[CART-BR-010]**: 1개월이 지난 상품은 자동으로 장바구니에서 삭제된다. (추후 개선)

## Cart 테이블 설계
- ID: 고유 식별자
- userId: 장바구니 소유자의 ID
- status: 장바구니의 상태

## CartItem 테이블 설계
- ID: 고유 식별자
- cartId: 속해있는 장바구니의 정보
- productId: 장바구니에 담긴 아이템의 정보(Product Join)
- quantity: 상품의 갯수
- addedDate: 담긴 날짜
- expirationAt: 만료 일자

## 유스케이스 시나리오
### CART-UC-001: 장바구니 상품 추가 및 조회
1. 사용자가 상품 상세 페이지로 진입한다.
2. 상품 상세 페이지에서 장바구니에 담기 버튼을 클릭한다.
3. 몇 개를 담을지 입력 받는다.
4. 갯수를 정하고 담기를 누르면 장바구니에 상품이 담긴다.
5. 장바구니 페이지로 이동한다.
6. 장바구니 페이지에는 본인이 장바구니에 담은 상품들이 저장되어 있다.
7. 시스템 상 정의된 데이터들이 장바구니 페이지에서 보여진다.

### CART-UC-002: 장바구니 중복 상품 추가
1. 사용자가 이미 존재하는 상품을 장바구니에 추가시킨다.
2. 시스템이 기존 상품의 수량을 증가시킨다.

### CART-UC-003(추후 개선): 만료된 상품 자동 제거
1. 시스템이 1일 1회 배치작업을 실행한다.
2. 장바구니에 저장된 상품들의 만료일시를 기준으로 정책을 적용시켜 만료일시가 지나면 제거한다.

### CART-UC-004: 장바구니 상품 제거
1. 장바구니 리스트를 조회한다.
2. 조회된 상품들 중 하나를 선택하여 그 상품을 제거한다.

### CART-UC-005: 주문페이지로 이동
1. 장바구니에 아이템을 가진 상태.
2. 아이템이 존재한다면 주문 버튼을 클릭하여 주문페이지로 이동한다.
3. 현재 장바구니 내역을 가지고 주문 페이지로 이동하도록 한다.
4. 만약 주문이 생성된다면 장바구니의 아이템들은 사라진다.