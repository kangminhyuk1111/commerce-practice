# Spring boot 이커머스 프로젝트

## 목차
- [프로젝트 소개](#-프로젝트-소개)
- [기술 스택](#-기술-스택)
- [아키텍처 및 설계 철학](#-아키텍처-및-설계-철학)
- [주요 기능](#-주요-기능)
- [도메인 구조](#-도메인-구조)
- [시작하기](#-시작하기)
- [개발 단계](#-개발-단계)

## 프로젝트 소개

이 프로젝트는 이커머스 플랫폼의 핵심 기능을 구현하며, **실무 환경에서 요구되는 설계 사고와 구현 역량**을 향상시키기 위한 학습용 프로젝트입니다.

### 예상 사용자 및 비즈니스 요구사항
- **일일 사용자 수**: 약 1만 명
- **상품 수**: 최대 1만 개
- **특징**: 요구사항 변경이 잦을 것으로 예상됨
- **팀 규모**: 개발자 5인 이하

## 🛠 기술 스택

### Backend
- **Java 17**
- **Spring Boot 3.5.6**
- **Spring Data JPA**
- **Gradle**

### Database
- **MySQL** (Production)
- **H2** (Test)

### Test
- **JUnit 5**
- **Spring Boot Test**

## 🏛 아키텍처 및 설계 철학

### 모놀리식 아키텍처 선택

사용자 규모와 비즈니스 특성을 고려하여 **모놀리식 아키텍처(Monolithic Architecture)** 를 채택하였습니다.

**선택 이유**
- 예상 트래픽과 데이터 규모에 비해 단일 서버 및 단일 RDB로 충분합니다.
- 마이크로서비스는 현재 규모에서 오버엔지니어링의 우려가 있습니다.
- 내부를 **도메인 단위로 패키징**하여 향후 분리 가능성을 고려하였습니다.
- 작은 팀 규모에서도 개발 및 유지보수가 용이합니다.

**확장 전략**
- 부하 발생 시 병목 지점을 파악하여 서버 확장 또는 DB 샤딩을 고려합니다.
- 도메인별 패키징 구조를 통해 향후 MSA 전환이 용이하도록 설계하였습니다.

### 설계 원칙

#### 1. 도메인 주도 설계 (DDD)
- 각 도메인은 독립적인 의미와 책임을 가집니다.
- 도메인 간 결합도를 낮추고 응집도를 높입니다.
- 변경이 타 도메인에 영향을 주지 않도록 설계합니다.

#### 2. 정책 기반 검증
- 비즈니스 규칙은 `PolicyValidator`를 통해 분리하여 관리합니다.
- 정책 변경 시 검증 객체만 수정하면 되므로 유지보수가 용이합니다.

#### 3. 유연한 확장성
- `Enum`을 활용하여 타입을 유연하게 확장합니다. (예: `ReviewTargetType`, `PointTransactionType` 등)
- 인터페이스 기반의 전략 패턴을 적용하여 다양한 구현체를 손쉽게 확장할 수 있습니다.
  
## 주요 기능

### 1. 상품 관리
- **상품 목록 조회**: 카테고리별 필터링 및 페이징 처리 (offset-limit 방식)
- **상품 상세 조회**: 상품 정보, 리뷰, 쿠폰, 찜하기, Q&A 통합 조회
- **다중 카테고리 지원**: 하나의 상품이 여러 카테고리에 속할 수 있습니다.

### 2. 리뷰 시스템
- **1인 1리뷰 정책**: `reviewKey`를 통해 중복 리뷰를 방지합니다.
- **별점 시스템**: 1~5점 평가 가능
- **확장성 고려 설계**: 상품 리뷰 외 판매자 리뷰 등으로 확장 가능 (`ReviewTargetType` 기반)

### 3. Q&A 시스템
- 상품별 질문과 답변을 관리합니다.
- 질문자와 판매자를 구분하여 관리합니다.
- 답변 여부 상태를 추적할 수 있습니다.

### 4. 찜하기 (Favorite)
- 사용자별로 찜한 상품을 관리합니다.
- 찜하기 추가 및 취소 기능을 제공합니다.

### 5. 포인트 시스템
- **포인트 적립 및 사용**: 모든 이력은 자동으로 기록됩니다.
- **동시성 제어**: 비관적 락(Pessimistic Lock)을 활용하여 데이터 정합성을 보장합니다.
- **사용 정책**: 최소 사용 단위는 1,000원입니다.
- **만료 정책**: 포인트는 만료되지 않습니다.

### 6. 쿠폰 시스템
- **쿠폰 타입**: 정액 할인, 비율 할인
- **적용 범위**: 전체 상품, 특정 카테고리, 특정 상품
- **발급 정책**: 동일 쿠폰의 중복 발급은 불가합니다.
- **만료 처리**: 발급일 기준 30일이 기본 만료 기간입니다.
- **쿠폰 조회**: 상품별 적용 가능한 쿠폰 목록을 제공합니다.

## 도메인 구조

```
src/main/java/com/commerce/
├── controller/          # Presentation Layer
│   ├── v1/             # API Version 1
│   └── dto/            # Request/Response DTOs
├── domain/             # Business Logic
│   ├── product/        # 상품 도메인
│   ├── category/       # 카테고리 도메인
│   ├── review/         # 리뷰 도메인
│   ├── qna/           # Q&A 도메인
│   ├── favorite/       # 찜하기 도메인
│   ├── point/         # 포인트 도메인
│   └── coupon/        # 쿠폰 도메인
└── support/           # 공통 모듈
    ├── entity/        # Base Entities
    ├── error/         # 에러 처리
    └── response/      # 공통 Response
```

### 도메인별 구조
각 도메인은 다음과 같은 일관된 구조를 가집니다:
```
domain/{domain_name}/
├── domain/            # 핵심 비즈니스 모델 (Entity, VO, Enum)
├── application/       # 비즈니스 로직 (Service, PolicyValidator)
├── repository/        # 데이터 접근 계층
│   └── impl/         # JPA 구현체
└── dto/              # 도메인 내부 DTO
```

## 개발 단계

프로젝트는 기획서 단위로 단계별 개발을 진행합니다:

| 단계 | 기능 | 상태 | 브랜치    |
|------|------|------|--------|
| Step 1 | 상품 목록 조회 | 완료 | step-1 |
| Step 2 | 상품 상세 조회 | 완료 | step-2 |
| Step 3 | 리뷰 시스템 | 완료 | step-3 |
| Step 4 | Q&A 시스템 | 완료 | step-4 |
| Step 5 | 찜하기 기능 | 완료 | step-5 |
| Step 6 | 포인트 시스템 | 완료 | step-6 |
| Step 7 | 쿠폰 시스템 | 완료 | step-7 |
